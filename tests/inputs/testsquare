IN                  // Ввод коэффициента a
POP RAX
IN                  // Ввод коэффициента b
POP RBX
IN                  // Ввод коэффициента c
POP RCX
PUSH RAX
PUSH 0
JNE :QUADRATIC      // Если a != 0, то решается квадратное уравнение, иначе линейное
PUSH RBX
PUSH 0
JNE :BNOTZERO       // Если b = 0, то проверяется истинность тождества c = 0
PUSH 0       
PUSH RCX     
JNE :FALSEINDENTITY // Если c = 0 -> тождество 0 = 0 верно
PUSH 1
OUT
HLT
:FALSEINDENTITY     // Если c != 0 -> тождество c = 0 не верно
PUSH 0
OUT
HLT
:BNOTZERO           // Если b != 0, то решается линейное уравнение
PUSH -1
PUSH RCX
MUL
PUSH RBX
DIV
OUT
PUSH 1
OUT
HLT
:QUADRATIC          // Вычисление дискриминанта D = b^2 - 4ac
PUSH RBX         
PUSH RBX
MUL
PUSH 4
PUSH RAX
PUSH RCX
MUL
MUL
SUB
POP RDX 
PUSH RDX
PUSH 0
JAE :ROOTS_EXISTS   // Если D < 0, то программа завершается
PUSH 0
OUT
HLT
:ROOTS_EXISTS       // Находится корень из неотрицательного дискриминанта
PUSH RDX   
SQRT
POP RDX
PUSH -1
PUSH RBX
MUL
PUSH RDX
ADD
PUSH 2
PUSH RAX
MUL
DIV
POP REX
PUSH RDX
PUSH 0
JNE :TWO_ROOTS       // Если D = 0, то ищется 1 корень, иначе 2
PUSH RCX
OUT
PUSH 1
OUT 
HLT
:TWO_ROOTS
PUSH -1 
PUSH RBX
MUL
PUSH RDX
SUB
PUSH 2
PUSH RAX
MUL
DIV
POP RCX
PUSH RCX
PUSH REX
JB :BELOW             // Корни печатаются в порядке возрастания и число 1 (количество корней)
PUSH REX
OUT
PUSH RCX
OUT     
PUSH 2
OUT
HLT
:BELOW
PUSH RCX
OUT
PUSH REX
OUT
PUSH 2
OUT
HLT
