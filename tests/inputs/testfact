:NEW_ITERATION           // Если пользователь ввел число > 0, то программа работает заново
IN                       // Нужное пользователю n
POP RAX
PUSH RAX
PUSH 0
JAE :IF_ABOVE_OR_EQUAL   // Если n < 0, то программа завершается
HLT
:IF_ABOVE_OR_EQUAL
CALL :FACTORIAL
PUSH RAX
OUT                      // Вывод факториала
JMP :NEW_ITERATION
:FACTORIAL
PUSH RAX
PUSH 1
JA :IF_ABOVE             // Если 0 <= n <= 1, то просходит базовый случай
PUSH 1
POP RAX
RET
:IF_ABOVE
PUSH RAX                 // В стек пушится значение RAX
CALL :DECREMENT_RAX      // RAX уменьшается на 1
CALL :FACTORIAL
POP RBX                  // Из стека достается предыдущее значение RAX и пишется в RBX
PUSH RAX
PUSH RBX
MUL
POP RAX                  // Итоговый факториал
RET
:DECREMENT_RAX
PUSH RAX                
PUSH 1 
SUB
POP RAX 
RET
